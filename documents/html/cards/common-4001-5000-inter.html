<style>
body {
  font-family: arial;
  font-size: 15px;
  /*text-align: center;*/
  color: white;
  background-color: black;
}
</style>

<script>
    let sites = ['Reverso','Google','Linguee','Cambridge','Deepl','Yandex'];

    let fullSiteText = {};
    let mainSiteText = {};

    function getAllFullSpanText(){
        for( site of sites)
            fullSiteText[site] = getSpanText(site);
    }
    function getAllMainSpanText(){
        for( site of sites)
            mainSiteText[site] = getMainText(site);
    }

    function getSpanText(site){
        return document.getElementById('dv'+site).querySelector('span').innerText;
    }
    function setSpanText(site, text){
        document.getElementById('dv'+site).querySelector('span').innerText = text;
    }
    function getSpanHtml(site, html){
        return document.getElementById('dv'+site).querySelector('span').innerHTML;
    }
    function setSpanHtml(site, html){
        document.getElementById('dv'+site).querySelector('span').innerHTML = html;
    }
    
    function getMainText(site) {
        let content = fullSiteText[site];
        let comma1, comma2, comma3, comma4 = '';
        if (content != '') {
            comma1 = content.indexOf(',');
            if(comma1==-1) {
                comma1 = content.length;
            }
            comma2 = content.indexOf(',',comma1+1);
            if(comma2==-1) {
                comma2 = content.length;
            }
            comma3 = content.indexOf(',',comma2+1);
            if(comma3==-1) {
                comma3 = content.length;
            }
            comma4 = content.indexOf(',',comma3+1);
            if(comma4==-1) {
                comma4 = content.length;
            }
            content =  content.substring(0,comma4);
        }
        return content;
    }

    function setMainText(site){
        setSpanText(site, mainSiteText[site]);
        bold(site);
        //createMaxButton(site);
        //removeMinButton(site);
        return content;
    }

    function removeMaxButton(site){
        let bt = document.getElementById('bt'+site+'Max');
        if(bt!=null) bt.remove();
    }
    function removeMinButton(site){
        let bt = document.getElementById('bt'+site+'Min');
        if(bt!=null) bt.remove();
    }
    
    function showFullText(site) {
        setSpanText(site, mainSiteText[site]);
        bold(site);
        createMinButton(site);
        removeMaxButton(site);
        return txtFull;
    }

    function createMinButton(site){
        bt = document.createElement('BUTTON');
        id = 'bt'+site+'Min';
        bt.setAttribute('id',id);
        bt.innerText = '-';
        div = document.getElementById('dv'+site).innerHTML;
        document.getElementById('dv'+site).innerHTML = div + bt.outerHTML;
        document.getElementById(id).style.display='inline';
        document.getElementById(id).addEventListener('click', eval('(setMainText("'+site+'"))') );
    }
    
    function createMaxButton(site){
        bt = document.createElement('BUTTON');
        id = 'bt'+site+'Max';
        bt.setAttribute('id',id);
        bt.innerText = '+';
        div = document.getElementById('dv'+site).innerHTML;
        document.getElementById('dv'+site).innerHTML = bt.outerHTML + div;
        //click = `showFullText("${site}")`;
        document.getElementById(id).style.display='inline';
        //document.getElementById(id).addEventListener('click', eval(`(${click})`) );
    }

    function getFrequencies(content) {
        lRound=-1;
        rRound=-1;
        frequencies = [];
        while(true) {
            lRound = content.indexOf('(',lRound+1);
            rRound = content.indexOf(')',rRound+1);
            if(lRound == -1) {
                return frequencies;
            }
            let freq = content.substring(lRound+1,rRound);
            freq = parseInt(freq);
            frequencies.push(freq);
        }
    }

    function getMainFrequencies(site) {
        let content = fullSiteText[site];
        if (content == '')
            return [];
        else
            return getFrequencies(content);
	}

    function showYandex() {
        document.getElementById('btYandexMax').style.display='none';
        document.getElementById('dvYandex').style.display='inline';
    }
    function hideYandex() {
        document.getElementById('btYandexMax').style.display='inline';
        document.getElementById('dvYandex').style.display='none';
    }

    function showPhrases() {
        document.getElementById('btPhrasesMax').style.display='none';
        document.getElementById('btPhrasesMin').style.display='inline';
        document.getElementById('dvPhrases').style.display='inline';
    }
    function hidePhrases() {
        document.getElementById('btPhrasesMax').style.display='inline';
        document.getElementById('btPhrasesMin').style.display='none';
        document.getElementById('dvPhrases').style.display='none';
    }

    function showBtPhrase() {
        let btPhrasesMax = document.getElementById('btPhrasesMax');
	    let enPhrases = document.getElementById('enPhrases');
	    let ptPhrases = document.getElementById('ptPhrases');
		if (enPhrases.innerText == '' && ptPhrases.innerText == '') {
			btPhrasesMax.style.display='none';
		}
    }

    function loadScripts () {
        getAllFullSpanText();
        getAllMainSpanText();
        //threeReversoFirst();
        setMainText('Google');
        //threeLingueeFirst();  
        
        //showBtPhrase();

        //document.getElementById('btReversoMax').addEventListener('click',showReversoFull);
        //document.getElementById('btReversoMin').addEventListener('click',threeReversoFirst);
        //document.getElementById('btGoogleMax').addEventListener('click',showGoogleFull);
        //document.getElementById('btGoogleMin').addEventListener('click',threeGoogleFirst);
        //document.getElementById('btLingueeMax').addEventListener('click',showLingueeFull);
        //document.getElementById('btLingueeMin').addEventListener('click',threeLingueeFirst);

        // document.getElementById('btYandexMax').addEventListener('click',showYandex);
        // document.getElementById('btYandexMin').addEventListener('click',hideYandex);

        // document.getElementById('btPhrasesMax').addEventListener('click',showPhrases);
        // document.getElementById('btPhrasesMin').addEventListener('click',hidePhrases);

    }
    
    </script>

    <div style="text-align:center;">
	    <font color="#3ff"><b>slipped</b></font><br>
    </div>
    <hr>
    
    <font color="#3ff"><b>reverso:</b></font>
    <div id="dvReverso" style="display:inline">
        <span>(8050)ace,(2000)free,(500)ox,(100)nothing,(5)great</span>
    </div>
    
     <br>
    <font color="#3ff"><b>google:</b></font>
    <div id="dvGoogle" style="display:inline">
        <span>(3)although,(3)please,(2)fight,(2)yes,(1)zero,(1)whats</span>
    </div>
    
    <br>
    <font color="#3ff"><b>linguee:</b></font>
    <div id="dvLinguee" style="display:inline">
        <span>no,please,fight,yes,zero</span>
    </div>

    <br>
    <font color="#3ff"><b>cambridge:</b></font>
    <div id="dvCambridge" style="display:inline">
        <span>hi,thanks,common phase,nothing better,your choice</span>
    </div>
    
    <br>
    <font color="#3ff"><b>deepl:</b> </font>
    <div id="dvDeepl" style="display:inline">
        <span>worked problems</span>
    </div>

    <br>

    <font color="#3ff"><b>yandex:</b> </font>
    <div id="dvYandex" style="display:inline">
        <span>burden,flee,nothing</span>
    </div>

    <hr>
    <font color="#3ff"><b>uk-ipa:</b></font> [{{yandex-en-uk-ipa}}]{{howjsay-mp3}}
	<br>
    <font color="#3ff"><b>us-ipa:</b></font> [{{tophonetic-en-us-ipa}}]{{en-us-mp3}}
    <hr>


    <div style="text-align:center;">
     	<font color="#3ff"><b>phrases:</b></font> 
	</div>
     <button id="btPhrasesMax">+</button>
     <button id="btPhrasesMin" style="display:none">-</button>
     <br>
    <div id="dvPhrases" style="display:none">
        <hr>
        <font color="#3ff"><b>english:</b></font>
        <br>
        <span id="enPhrases">{{en-phrases}}</span>
        <hr>
        <font color="#3ff"><b>portuguese:</b></font>
        <br>
        <span id="ptPhrases">{{pt-phrases}}</span>
    </div>

<script>
    window.onload = loadScripts();
</script>
